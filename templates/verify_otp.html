{% extends "base.html" %}
{% block content %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/verify_otp.css') }}">
{% endblock %}

<div class="auth-bg">

    <div class="auth-card">

        <!-- Title -->
        <h3 class="fw-bold text-center mb-2">Verify OTP</h3>

        <!-- Info text -->
        <p class="text-center text-muted mb-3">
            OTP has been sent to <strong>{{ email }}</strong>
        </p>

        <!-- ================================================
             OTP FORM
             • If session["otp_mode"] == "signup" → signup OTP
             • Else → login OTP
        ================================================= -->
        <form 
            action="{% if session.get('otp_mode') == 'signup' %}
                        {{ url_for('auth.verify_signup_otp') }}
                    {% else %}
                        {{ url_for('auth.verify_login_otp') }}
                    {% endif %}"
            method="post">

            <!-- Hidden email -->
            <input type="hidden" name="email" value="{{ email }}">

            <!-- OTP Input -->
            <label class="fw-semibold">Enter OTP</label>
            <input type="text"
                   name="otp"
                   maxlength="6"
                   class="form-control auth-input mb-3"
                   placeholder="Enter OTP"
                   required>

            <!-- Verify Button -->
            <button class="btn btn-dark auth-btn w-100">Verify</button>
        </form>

        <!-- ======================================================
             RESEND OTP — must resend EMAIL OTP, NOT mobile OTP
        ======================================================= -->
        <div class="text-center mt-3">
            <small class="text-muted">
                Didn’t receive it?
                <a class="resend-link"
                   href="{{ url_for('auth.send_login_email') }}?email={{ email }}">
                    Resend OTP
                </a>
            </small>
        </div>

    </div>
</div>

{% endblock %}
